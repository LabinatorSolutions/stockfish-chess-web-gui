{
  "version": 3,
  "sources": ["../../node_modules/bootstrap-show-modal/src/ShowModal.js", "../../node_modules/chess-console/src/components/GameControl/NewGameDialog.js", "../../node_modules/chess-console/src/components/GameControl/GameControl.js"],
  "sourcesContent": ["/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/bootstrap-show-modal\n * License: MIT, see file 'LICENSE'\n */\n\nexport class Modal {\n    constructor(props) {\n        this.props = {\n            title: \"\", // the dialog title html\n            body: \"\", // the dialog body html\n            footer: \"\", // the dialog footer html (mainly used for buttons)\n            modalClass: \"fade\", // Additional css for \".modal\", \"fade\" for fade effect\n            modalDialogClass: \"\", // Additional css for \".modal-dialog\", like \"modal-lg\" or \"modal-sm\" for sizing\n            headerClass: \"\", // Additional css for \".modal-header\"\n            bodyClass: \"\", // Additional css for \".modal-body\"\n            footerClass: \"\", // Additional css for \".modal-footer\"\n            theme: undefined, // data-bs-theme\n            options: { // The Bootstrap modal options as described here: https://getbootstrap.com/docs/4.0/components/modal/#options\n                backdrop: 'static' // disallow closing on click in the background\n            },\n            draggable: false, // make the dialog draggable\n            // Events:\n            onCreate: null, // Callback, called after the modal was created\n            onShown: null, // Callback, called after the modal was shown and completely faded in\n            onDispose: null, // Callback, called after the modal was disposed\n            onSubmit: null // Callback of bootstrap.showConfirm(), called after yes or no was pressed\n        }\n        Object.assign(this.props, props)\n        this.id = \"bootstrap-show-modal-\" + i\n        i++\n        this.show()\n        if (this.props.onCreate) {\n            this.props.onCreate(this)\n        }\n    }\n\n    createContainerElement() {\n        const self = this\n        this.element = document.createElement(\"div\")\n        this.element.id = this.id\n        let cssClass = \"modal \" + this.props.modalClass\n        // seems to be a bug in bootstrap, but I am not sure\n        if(this.props.theme === \"dark\") {\n            cssClass += \" text-light\"\n        }\n        this.element.setAttribute(\"class\", cssClass)\n        this.element.setAttribute(\"tabindex\", \"-1\")\n        this.element.setAttribute(\"role\", \"dialog\")\n        this.element.setAttribute(\"aria-labelledby\", this.id)\n        if (this.props.theme) {\n            this.element.setAttribute(\"data-bs-theme\", this.props.theme)\n        }\n        this.element.innerHTML = `\n<div class=\"modal-dialog ${this.props.modalDialogClass}\" role=\"document\">\n    <div class=\"modal-content\">\n    <div class=\"modal-header ${this.props.headerClass}\">\n        <h5 class=\"modal-title\"></h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n    </div>\n    <div class=\"modal-body ${this.props.bodyClass}\"></div>\n    <div class=\"modal-footer ${this.props.footerClass}\"></div>\n    </div>\n</div>`\n        document.body.appendChild(this.element)\n        this.titleElement = this.element.querySelector(\".modal-title\")\n        this.bodyElement = this.element.querySelector(\".modal-body\")\n        this.footerElement = this.element.querySelector(\".modal-footer\")\n        this.element.addEventListener('hidden.bs.modal', function () {\n            self.dispose()\n        })\n        this.element.addEventListener('shown.bs.modal', function () {\n            if (self.props.onShown) {\n                self.props.onShown(self)\n            }\n        })\n    }\n\n    show() {\n        if (!this.element) {\n            this.createContainerElement()\n            if (this.props.options) {\n                const modalInstance = new bootstrap.Modal(this.element, this.props.options)\n                if (modalInstance) {\n                    modalInstance.show()\n                }\n            } else {\n                const modalInstance = new bootstrap.Modal(this.element)\n                if (modalInstance) {\n                    modalInstance.show()\n                }\n            }\n        } else {\n            const modalInstance = bootstrap.Modal.getInstance(this.element)\n            if (modalInstance) {\n                modalInstance.show()\n            }\n        }\n        if (this.props.title) {\n            this.titleElement.style.display = \"\"\n            this.titleElement.innerHTML = this.props.title\n        } else {\n            this.titleElement.style.display = \"none\"\n        }\n        if (this.props.body) {\n            this.bodyElement.style.display = \"\"\n            this.bodyElement.innerHTML = this.props.body\n        } else {\n            this.bodyElement.style.display = \"none\"\n        }\n        if (this.props.footer) {\n            this.footerElement.style.display = \"\"\n            this.footerElement.innerHTML = this.props.footer\n        } else {\n            this.footerElement.style.display = \"none\"\n        }\n    }\n\n    hide() {\n        const modalInstance = bootstrap.Modal.getInstance(this.element)\n        if (modalInstance) {\n            modalInstance.hide()\n        }\n    }\n\n    dispose() {\n        const modalInstance = bootstrap.Modal.getInstance(this.element)\n        if (modalInstance) {\n            modalInstance.dispose()\n        }\n        document.body.removeChild(this.element)\n        if (this.props.onDispose) {\n            this.props.onDispose(this)\n        }\n    }\n}\n\nlet i = 0\nbootstrap.showModal = (props) => {\n    if (props.buttons) {\n        let footer = \"\"\n        for (let key in props.buttons) {\n            const buttonText = props.buttons[key]\n            footer += `<button type=\"button\" class=\"btn btn-primary\" data-value=\"${key}\" data-bs-dismiss=\"modal\">${buttonText}</button>`\n        }\n        props.footer = footer\n    }\n    return new Modal(props)\n}\n\nbootstrap.showAlert = (props) => {\n    props.buttons = {OK: 'OK'}\n    return bootstrap.showModal(props)\n}\n\nbootstrap.showConfirm = (props) => {\n    props.footer = `<button class=\"btn btn-secondary btn-false btn-cancel\">${props.textFalse}</button><button class=\"btn btn-primary btn-true\">${props.textTrue}</button>`\n    props.onCreate = (modal) => {\n        const modalInstance = bootstrap.Modal.getInstance(modal.element)\n        modal.element.querySelector(\".btn-false\").addEventListener(\"click\", function () {\n            if (modalInstance) {\n                modalInstance.hide()\n            }\n            modal.props.onSubmit(false, modal)\n        })\n        modal.element.querySelector(\".btn-true\").addEventListener(\"click\", function () {\n            if (modalInstance) {\n                modalInstance.hide()\n            }\n            modal.props.onSubmit(true, modal)\n        })\n    }\n    return bootstrap.showModal(props)\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/chess-console\n * License: MIT, see file 'LICENSE'\n */\n\nimport {COLOR} from \"cm-chess/src/Chess.js\"\nimport \"bootstrap-show-modal/src/ShowModal.js\"\n\nexport class NewGameDialog {\n\n    constructor(module, props) {\n        const i18n = module.i18n\n        i18n.load({\n            de: {\n                color: \"Farbe\",\n                white: \"Weiss\",\n                black: \"Schwarz\",\n                auto: \"automatisch\"\n            },\n            en: {\n                color: \"Color\",\n                white: \"White\",\n                black: \"Black\",\n                auto: \"automatically\"\n            }\n        }).then(() => {\n            const newGameColor = module.persistence.loadValue(\"newGameColor\")\n            props.modalClass = \"fade\"\n            props.body =\n               `<form class=\"form\"><div class=\"form-group row\">\n                    <div class=\"col-3\"><label for=\"color\" class=\"col-form-label\">${i18n.t(\"color\")}</label></div>\n                    <div class=\"col-9\"><select id=\"color\" class=\"form-select\">\n                        <option value=\"auto\">${i18n.t(\"auto\")}</option>\n                        <option value=\"w\" ${newGameColor === \"w\" ? \"selected\" : \"\"}>${i18n.t(\"white\")}</option>\n                        <option value=\"b\" ${newGameColor === \"b\" ? \"selected\" : \"\"}>${i18n.t(\"black\")}</option>\n                    </select></div>\n                </div></form>`\n            props.footer = `<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${i18n.t(\"cancel\")}</button>\n            <button type=\"submit\" class=\"btn btn-primary\">${i18n.t(\"ok\")}</button>`\n            props.onCreate = (modal) => {\n                modal.element.querySelector(\"button[type='submit']\").addEventListener(\"click\", function (event) {\n                    event.preventDefault()\n                    const formElement = modal.element.querySelector(\".form\")\n                    let color = formElement.querySelector(\"#color\").value\n                    module.persistence.saveValue(\"newGameColor\", color)\n                    if (color !== COLOR.white && color !== COLOR.black) {\n                        color = (module.props.playerColor === COLOR.white) ? COLOR.black : COLOR.white\n                    }\n                    modal.hide()\n                    module.newGame({playerColor: color})\n                })\n            }\n            bootstrap.showModal(props)\n        })\n    }\n\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/chess-console\n * License: MIT, see file 'LICENSE'\n */\n\nimport {NewGameDialog} from \"./NewGameDialog.js\"\n\nexport class GameControl {\n\n    constructor(chessConsole, props) {\n        this.context = chessConsole.componentContainers.controlButtons\n        this.chessConsole = chessConsole\n        this.props = props\n\n        const i18n = chessConsole.i18n\n        i18n.load({\n            de: {\n                \"start_game\": \"Ein neues Spiel starten\",\n                \"undo_move\": \"Zug zurÃ¼ck nehmen\"\n            },\n            en: {\n                \"start_game\": \"Start a new game\",\n                \"undo_move\": \"Undo move\"\n            }\n        }).then(() => {\n\n            this.$btnUndoMove = $(`<button type=\"button\" title=\"${i18n.t('undo_move')}\" class=\"btn btn-icon btn-light undoMove\"><i class=\"fa fa-fw fa-undo-alt\" aria-hidden=\"true\"></i></button>`)\n            this.$btnStartNewGame = $(`<button type=\"button\" title=\"${i18n.t('start_game')}\" class=\"btn btn-icon btn-light startNewGame\"><i class=\"fa fa-fw fa-plus\" aria-hidden=\"true\"></i></button>\\`)`)\n\n            this.context.appendChild(this.$btnUndoMove[0])\n            this.context.appendChild(this.$btnStartNewGame[0])\n\n            this.$btnUndoMove.click(() => {\n                this.chessConsole.undoMove()\n            })\n            this.$btnStartNewGame.click(() => {\n                this.showNewGameDialog()\n            })\n\n            this.chessConsole.state.observeChess(() => {\n                this.setButtonStates()\n            })\n            this.setButtonStates()\n        })\n    }\n\n    showNewGameDialog() {\n        new NewGameDialog(this.chessConsole, {\n            title: this.chessConsole.i18n.t('start_game')\n        })\n    }\n\n    setButtonStates() {\n        if (this.chessConsole.state.chess.plyCount() < 2) {\n            this.$btnUndoMove.prop(\"disabled\", true)\n        } else {\n            this.$btnUndoMove.prop(\"disabled\", false)\n        }\n    }\n\n}\n"],
  "mappings": "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",
  "names": []
}
