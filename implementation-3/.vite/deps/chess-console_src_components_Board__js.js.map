{
  "version": 3,
  "sources": ["../../node_modules/cm-web-modules/src/utils/CoreUtils.js", "../../node_modules/cm-chessboard/src/extensions/promotion-dialog/PromotionDialog.js", "../../node_modules/cm-chessboard/src/extensions/accessibility/Accessibility.js", "../../node_modules/cm-chessboard/src/extensions/auto-border-none/AutoBorderNone.js", "../../node_modules/chess-console/src/components/Board.js"],
  "sourcesContent": ["/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/cm-web-modules\n * License: MIT, see file 'LICENSE'\n */\n\nexport class CoreUtils {\n\n    static debounce(callback, wait = 0, immediate = false) {\n        let timeout\n        return function executedFunction(...args) {\n            if (immediate && !timeout) {\n                callback(...args)\n                timeout = true\n            } else {\n                const debounced = () => {\n                    clearTimeout(timeout)\n                    callback(...args)\n                }\n                clearTimeout(timeout)\n                timeout = setTimeout(debounced, wait)\n            }\n        }\n    }\n\n    static mergeObjects(target, source) {\n        const isObject = (obj) => obj && typeof obj === 'object'\n        if (!isObject(target) || !isObject(source)) {\n            return source\n        }\n        for (const key of Object.keys(source)) {\n            if (source[key] instanceof Object) {\n                Object.assign(source[key], CoreUtils.mergeObjects(target[key], source[key]))\n            }\n        }\n        Object.assign(target || {}, source)\n        return target\n    }\n\n    static createTask() {\n        let resolve, reject\n        const promise = new Promise(function (_resolve, _reject) {\n            resolve = _resolve\n            reject = _reject\n        })\n        promise.resolve = resolve\n        promise.reject = reject\n        return promise\n    }\n\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/cm-chessboard\n * License: MIT, see file 'LICENSE'\n */\nimport {Extension, EXTENSION_POINT} from \"../../model/Extension.js\"\nimport {COLOR, PIECE} from \"../../Chessboard.js\"\nimport {Svg} from \"../../lib/Svg.js\"\nimport {Utils} from \"../../lib/Utils.js\"\n\nconst DISPLAY_STATE = {\n    hidden: \"hidden\",\n    displayRequested: \"displayRequested\",\n    shown: \"shown\"\n}\n\nexport const PROMOTION_DIALOG_RESULT_TYPE = {\n    pieceSelected: \"pieceSelected\",\n    canceled: \"canceled\"\n}\n\nexport class PromotionDialog extends Extension {\n\n    /** @constructor */\n    constructor(chessboard) {\n        super(chessboard)\n        this.registerExtensionPoint(EXTENSION_POINT.afterRedrawBoard, this.extensionPointRedrawBoard.bind(this))\n        chessboard.showPromotionDialog = this.showPromotionDialog.bind(this)\n        chessboard.isPromotionDialogShown = this.isPromotionDialogShown.bind(this)\n        this.promotionDialogGroup = Svg.addElement(chessboard.view.interactiveTopLayer, \"g\", {class: \"promotion-dialog-group\"})\n        this.state = {\n            displayState: DISPLAY_STATE.hidden,\n            callback: null,\n            dialogParams: {\n                square: null,\n                color: null\n            }\n        }\n    }\n\n    // public (chessboard.showPromotionDialog)\n    showPromotionDialog(square, color, callback) {\n        this.state.dialogParams.square = square\n        this.state.dialogParams.color = color\n        this.state.callback = callback\n        this.setDisplayState(DISPLAY_STATE.displayRequested)\n        setTimeout(() => {\n                this.chessboard.view.positionsAnimationTask.then(() => {\n                    this.setDisplayState(DISPLAY_STATE.shown)\n                })\n            }\n        )\n    }\n\n    // public (chessboard.isPromotionDialogShown)\n    isPromotionDialogShown() {\n        return this.state.displayState === DISPLAY_STATE.shown ||\n            this.state.displayState === DISPLAY_STATE.displayRequested\n    }\n\n    // private\n    extensionPointRedrawBoard() {\n        this.redrawDialog()\n    }\n\n    drawPieceButton(piece, point) {\n        const squareWidth = this.chessboard.view.squareWidth\n        const squareHeight = this.chessboard.view.squareHeight\n        Svg.addElement(this.promotionDialogGroup,\n            \"rect\", {\n                x: point.x, y: point.y, width: squareWidth, height: squareHeight,\n                class: \"promotion-dialog-button\",\n                \"data-piece\": piece\n            })\n        this.chessboard.view.drawPiece(this.promotionDialogGroup, piece, point)\n    }\n\n    redrawDialog() {\n        while (this.promotionDialogGroup.firstChild) {\n            this.promotionDialogGroup.removeChild(this.promotionDialogGroup.firstChild)\n        }\n        if (this.state.displayState === DISPLAY_STATE.shown) {\n            const squareWidth = this.chessboard.view.squareWidth\n            const squareHeight = this.chessboard.view.squareHeight\n            const squareCenterPoint = this.chessboard.view.squareToPoint(this.state.dialogParams.square)\n            squareCenterPoint.x = squareCenterPoint.x + squareWidth / 2\n            squareCenterPoint.y = squareCenterPoint.y + squareHeight / 2\n            let turned = false\n            const rank = parseInt(this.state.dialogParams.square.charAt(1), 10)\n            if (this.chessboard.getOrientation() === COLOR.white && rank < 5 ||\n                this.chessboard.getOrientation() === COLOR.black && rank >= 5) {\n                turned = true\n            }\n            const offsetY = turned ? -4 * squareHeight : 0\n            const offsetX = squareCenterPoint.x + squareWidth > this.chessboard.view.width ? -squareWidth : 0\n            Svg.addElement(this.promotionDialogGroup,\n                \"rect\", {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y + offsetY,\n                    width: squareWidth,\n                    height: squareHeight * 4,\n                    class: \"promotion-dialog\"\n                })\n            const dialogParams = this.state.dialogParams\n            if (turned) {\n                this.drawPieceButton(PIECE[dialogParams.color + \"q\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y - squareHeight\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"r\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y - squareHeight * 2\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"b\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y - squareHeight * 3\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"n\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y - squareHeight * 4\n                })\n            } else {\n                this.drawPieceButton(PIECE[dialogParams.color + \"q\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"r\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y + squareHeight\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"b\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y + squareHeight * 2\n                })\n                this.drawPieceButton(PIECE[dialogParams.color + \"n\"], {\n                    x: squareCenterPoint.x + offsetX,\n                    y: squareCenterPoint.y + squareHeight * 3\n                })\n            }\n        }\n    }\n\n    promotionDialogOnClickPiece(event) {\n        if (event.button !== 2) {\n            if (event.target.dataset.piece) {\n                if(this.state.callback) {\n                    this.state.callback({\n                        type: PROMOTION_DIALOG_RESULT_TYPE.pieceSelected,\n                        square: this.state.dialogParams.square,\n                        piece: event.target.dataset.piece\n                    })\n                }\n                this.setDisplayState(DISPLAY_STATE.hidden)\n            } else {\n                this.promotionDialogOnCancel(event)\n            }\n        }\n    }\n\n    promotionDialogOnCancel(event) {\n        if (this.state.displayState === DISPLAY_STATE.shown) {\n            event.preventDefault()\n            this.setDisplayState(DISPLAY_STATE.hidden)\n            if(this.state.callback) {\n                this.state.callback({type: PROMOTION_DIALOG_RESULT_TYPE.canceled})\n            }\n        }\n    }\n\n    contextMenu(event) {\n        event.preventDefault()\n        this.setDisplayState(DISPLAY_STATE.hidden)\n        if(this.state.callback) {\n            this.state.callback({type: PROMOTION_DIALOG_RESULT_TYPE.canceled})\n        }\n    }\n\n    setDisplayState(displayState) {\n        this.state.displayState = displayState\n        if (displayState === DISPLAY_STATE.shown) {\n            this.clickDelegate = Utils.delegate(this.chessboard.view.svg,\n                \"pointerdown\",\n                \"*\",\n                this.promotionDialogOnClickPiece.bind(this))\n            this.contextMenuListener = this.contextMenu.bind(this)\n            this.chessboard.view.svg.addEventListener(\"contextmenu\", this.contextMenuListener)\n        } else if (displayState === DISPLAY_STATE.hidden) {\n            this.clickDelegate.remove()\n            this.chessboard.view.svg.removeEventListener(\"contextmenu\", this.contextMenuListener)\n        }\n        this.redrawDialog()\n    }\n\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/cm-chessboard\n * License: MIT, see file 'LICENSE'\n */\nimport {Extension, EXTENSION_POINT} from \"../../model/Extension.js\"\nimport {COLOR, INPUT_EVENT_TYPE} from \"../../Chessboard.js\"\nimport {piecesTranslations, renderPieceTitle} from \"./I18n.js\"\nimport {Utils} from \"../../lib/Utils.js\"\n\nconst translations = {\n    de: {\n        chessboard: \"Schachbrett\",\n        pieces_lists: \"Figurenlisten\",\n        board_as_table: \"Schachbrett als Tabelle\",\n        move_piece: \"Figur bewegen\",\n        from: \"Zug von\",\n        to: \"Zug nach\",\n        move: \"Zug ausführen\",\n        input_white_enabled: \"Eingabe Weiß aktiviert\",\n        input_black_enabled: \"Eingabe Schwarz aktiviert\",\n        input_disabled: \"Eingabe deaktiviert\",\n        pieces: \"Figuren\",\n    },\n    en: {\n        chessboard: \"Chessboard\",\n        pieces_lists: \"Pieces lists\",\n        board_as_table: \"Chessboard as table\",\n        move_piece: \"Move piece\",\n        from: \"Move from\",\n        to: \"Move to\",\n        move: \"Make move\",\n        input_white_enabled: \"Input white enabled\",\n        input_black_enabled: \"Input black enabled\",\n        input_disabled: \"Input disabled\",\n        pieces: \"Pieces\"\n    }\n}\n\nexport class Accessibility extends Extension {\n    constructor(chessboard, props) {\n        super(chessboard)\n        this.props = {\n            language: navigator.language.substring(0, 2).toLowerCase(), // supports \"de\" and \"en\" for now, used for pieces naming\n            brailleNotationInAlt: true, // show the braille notation of the position in the alt attribute of the SVG image\n            movePieceForm: true, // display a form to move a piece (from, to, move)\n            boardAsTable: true, // display the board additionally as HTML table\n            piecesAsList: true, // display the pieces additionally as List\n            visuallyHidden: true // hide all those extra outputs visually but keep them accessible for screen readers and braille displays\n        }\n        Object.assign(this.props, props)\n        if (this.props.language !== \"de\" && this.props.language !== \"en\") {\n            this.props.language = \"en\"\n        }\n        this.lang = this.props.language\n        this.tPieces = piecesTranslations[this.lang]\n        this.t = translations[this.lang]\n        this.components = []\n        if(this.props.movePieceForm || this.props.boardAsTable || this.props.piecesAsList) {\n            const container = document.createElement(\"div\")\n            container.classList.add(\"cm-chessboard-accessibility\")\n            this.chessboard.context.appendChild(container)\n            if(this.props.visuallyHidden) {\n                container.classList.add(\"visually-hidden\")\n            }\n            if (this.props.movePieceForm) {\n                this.components.push(new MovePieceForm(container, this))\n            }\n            if (this.props.boardAsTable) {\n                this.components.push(new BoardAsTable(container, this))\n            }\n            if (this.props.piecesAsList) {\n                this.components.push(new PiecesAsList(container, this))\n            }\n        }\n        if (this.props.brailleNotationInAlt) {\n            this.components.push(new BrailleNotationInAlt(this))\n        }\n    }\n}\n\nclass BrailleNotationInAlt {\n    constructor(extension) {\n        this.extension = extension\n        extension.registerExtensionPoint(EXTENSION_POINT.positionChanged, () => {\n            this.redraw()\n        })\n    }\n\n    redraw() {\n        const pieces = this.extension.chessboard.state.position.getPieces()\n        let listW = piecesTranslations[this.extension.lang].colors.w.toUpperCase() + \":\"\n        let listB = piecesTranslations[this.extension.lang].colors.b.toUpperCase() + \":\"\n        for (const piece of pieces) {\n            const pieceName = piece.type === \"p\" ? \"\" : piecesTranslations[this.extension.lang].pieces[piece.type].toUpperCase()\n            if (piece.color === \"w\") {\n                listW += \" \" + pieceName + piece.position\n            } else {\n                listB += \" \" + pieceName + piece.position\n            }\n        }\n        const altText = `${listW}\n${listB}`\n        this.extension.chessboard.view.svg.setAttribute(\"alt\", altText)\n    }\n}\n\nclass MovePieceForm {\n    constructor(container, extension) {\n        this.chessboard = extension.chessboard\n        this.movePieceFormContainer = Utils.createDomElement(`\n<div>\n    <h3 id=\"hl_form_${this.chessboard.id}\">${extension.t.move_piece}</h3>\n    <form aria-labelledby=\"hl_form_${this.chessboard.id}\">\n        <label for=\"move_piece_input_from_${this.chessboard.id}\">${extension.t.from}</label>\n        <input class=\"input-from\" type=\"text\" size=\"2\" id=\"move_piece_input_from_${this.chessboard.id}\"/>\n        <label for=\"move_piece_input_to_${this.chessboard.id}\">${extension.t.to}</label>\n        <input class=\"input-to\" type=\"text\" size=\"2\" id=\"move_piece_input_to_${this.chessboard.id}\"/>\n        <button type=\"submit\" class=\"button-move\">${extension.t.move}</button>\n    </form>\n</div>`)\n        this.form = this.movePieceFormContainer.querySelector(\"form\")\n        this.inputFrom = this.form.querySelector(\".input-from\")\n        this.inputTo = this.form.querySelector(\".input-to\")\n        this.moveButton = this.form.querySelector(\".button-move\")\n        this.form.addEventListener(\"submit\", (evt) => {\n            evt.preventDefault()\n            if (this.chessboard.state.moveInputCallback({\n                chessboard: this.chessboard,\n                type: INPUT_EVENT_TYPE.validateMoveInput,\n                squareFrom: this.inputFrom.value,\n                squareTo: this.inputTo.value\n            })) {\n                this.chessboard.movePiece(this.inputFrom.value, this.inputTo.value,\n                    true).then(() => {\n                    this.inputFrom.value = \"\"\n                    this.inputTo.value = \"\"\n                })\n            }\n        })\n        container.appendChild(this.movePieceFormContainer)\n        extension.registerExtensionPoint(EXTENSION_POINT.moveInputToggled, () => {\n            this.redraw()\n        })\n    }\n\n    redraw() {\n        if (this.inputFrom) {\n            if (this.chessboard.state.inputWhiteEnabled || this.chessboard.state.inputBlackEnabled) {\n                this.inputFrom.disabled = false\n                this.inputTo.disabled = false\n                this.moveButton.disabled = false\n            } else {\n                this.inputFrom.disabled = true\n                this.inputTo.disabled = true\n                this.moveButton.disabled = true\n            }\n        }\n    }\n}\n\nclass BoardAsTable {\n    constructor(container, extension) {\n        this.extension = extension\n        this.chessboard = extension.chessboard\n        this.boardAsTableContainer = Utils.createDomElement(`<div><h3 id=\"hl_table_${this.chessboard.id}\">${extension.t.board_as_table}</h3><div class=\"table\"></div></div>`)\n        this.boardAsTable = this.boardAsTableContainer.querySelector(\".table\")\n        container.appendChild(this.boardAsTableContainer)\n        extension.registerExtensionPoint(EXTENSION_POINT.positionChanged, () => {\n            this.redraw()\n        })\n        extension.registerExtensionPoint(EXTENSION_POINT.boardChanged, () => {\n            this.redraw()\n        })\n    }\n\n    redraw() {\n        const squares = this.chessboard.state.position.squares.slice()\n        const ranks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"]\n        const files = [\"8\", \"7\", \"6\", \"5\", \"4\", \"3\", \"2\", \"1\"]\n        if (this.chessboard.state.orientation === COLOR.black) {\n            ranks.reverse()\n            files.reverse()\n            squares.reverse()\n        }\n        let html = `<table aria-labelledby=\"hl_table_${this.chessboard.id}\"><tr><th></th>`\n        for (const rank of ranks) {\n            html += `<th scope='col'>${rank}</th>`\n        }\n        html += \"</tr>\"\n        for (let x = 7; x >= 0; x--) {\n            html += `<tr><th scope=\"row\">${files[7 - x]}</th>`\n            for (let y = 0; y < 8; y++) {\n                const pieceCode = squares[y % 8 + x * 8]\n                let color, name\n                if (pieceCode) {\n                    color = pieceCode.charAt(0)\n                    name = pieceCode.charAt(1)\n                    html += `<td>${renderPieceTitle(this.extension.lang, name, color)}</td>`\n                } else {\n                    html += `<td></td>`\n                }\n            }\n            html += \"</tr>\"\n        }\n        html += \"</table>\"\n        this.boardAsTable.innerHTML = html\n    }\n}\n\nclass PiecesAsList {\n    constructor(container, extension) {\n        this.extension = extension\n        this.chessboard = extension.chessboard\n        this.piecesListContainer = Utils.createDomElement(`<div><h3 id=\"hl_lists_${this.chessboard.id}\">${extension.t.pieces_lists}</h3><div class=\"list\"></div></div>`)\n        this.piecesList = this.piecesListContainer.querySelector(\".list\")\n        container.appendChild(this.piecesListContainer)\n        extension.registerExtensionPoint(EXTENSION_POINT.positionChanged, () => {\n            this.redraw()\n        })\n    }\n\n    redraw() {\n        const pieces = this.chessboard.state.position.getPieces()\n        let listW = \"\"\n        let listB = \"\"\n        for (const piece of pieces) {\n            if (piece.color === \"w\") {\n                listW += `<li class=\"list-inline-item\">${renderPieceTitle(this.extension.lang, piece.type)} ${piece.position}</li>`\n            } else {\n                listB += `<li class=\"list-inline-item\">${renderPieceTitle(this.extension.lang, piece.type)} ${piece.position}</li>`\n            }\n        }\n        this.piecesList.innerHTML = `\n        <h4 id=\"white_${this.chessboard.id}\">${this.extension.t.pieces} ${this.extension.tPieces.colors_long.w}</h4>\n        <ul aria-labelledby=\"white_${this.chessboard.id}\" class=\"list-inline\">${listW}</ul>\n        <h4 id=\"black_${this.chessboard.id}\">${this.extension.t.pieces} ${this.extension.tPieces.colors_long.b}</h4>\n        <ul aria-labelledby=\"black_${this.chessboard.id}\" class=\"list-inline\">${listB}</ul>`\n    }\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/cm-chessboard\n * License: MIT, see file 'LICENSE'\n */\nimport {Extension, EXTENSION_POINT} from \"../../model/Extension.js\"\n\nexport class AutoBorderNone extends Extension {\n    constructor(chessboard, props = {}) {\n        super(chessboard)\n        this.props = {\n            chessboardBorderType: chessboard.props.style.borderType,\n            borderNoneBelow: 540 // pixels width of the board, where the border is set to none\n        }\n        Object.assign(this.props, props)\n        this.registerExtensionPoint(EXTENSION_POINT.beforeRedrawBoard, this.extensionPointBeforeRedrawBoard.bind(this))\n    }\n    extensionPointBeforeRedrawBoard() {\n        let newBorderType\n        if(this.chessboard.view.width < this.props.borderNoneBelow){\n            newBorderType = \"none\"\n        } else {\n            newBorderType = this.props.chessboardBorderType\n        }\n        if(newBorderType !== this.chessboard.props.style.borderType) {\n            this.chessboard.props.style.borderType = newBorderType\n            this.chessboard.view.updateMetrics()\n        }\n    }\n}\n", "/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/chess-console\n * License: MIT, see file 'LICENSE'\n */\n\nimport {Chessboard, COLOR, INPUT_EVENT_TYPE} from \"cm-chessboard/src/Chessboard.js\"\nimport {FEN} from \"cm-chessboard/src/model/Position.js\"\nimport {Markers} from \"cm-chessboard/src/extensions/markers/Markers.js\"\nimport {Observe} from \"cm-web-modules/src/observe/Observe.js\"\nimport {CoreUtils} from \"cm-web-modules/src/utils/CoreUtils.js\"\nimport {DomUtils} from \"cm-web-modules/src/utils/DomUtils.js\"\nimport {PromotionDialog} from \"cm-chessboard/src/extensions/promotion-dialog/PromotionDialog.js\"\nimport {Accessibility} from \"cm-chessboard/src/extensions/accessibility/Accessibility.js\"\nimport {CONSOLE_MESSAGE_TOPICS} from \"../ChessConsole.js\"\nimport {AutoBorderNone} from \"cm-chessboard/src/extensions/auto-border-none/AutoBorderNone.js\"\n\nexport const CONSOLE_MARKER_TYPE = {\n    moveInput: {class: \"marker-frame\", slice: \"markerFrame\"},\n    check: {class: \"marker-circle-danger\", slice: \"markerCircle\"},\n    wrongMove: {class: \"marker-frame-danger\", slice: \"markerFrame\"},\n    premove: {class: \"marker-frame-primary\", slice: \"markerFrame\"},\n    legalMove: {class: \"marker-dot\", slice: \"markerDot\"},\n    legalMoveCapture: {class: \"marker-bevel\", slice: \"markerBevel\"}\n}\n\nexport class Board {\n\n    constructor(chessConsole, props = {}) {\n        this.context = chessConsole.componentContainers.board\n        chessConsole.components.board = this // register board component, to allow access to the promotion dialog\n        this.initialized = new Promise((resolve) => {\n            this.i18n = chessConsole.i18n\n            this.i18n.load({\n                de: {\n                    chessBoard: \"Schachbrett\"\n                },\n                en: {\n                    chessBoard: \"Chess Board\"\n                }\n            }).then(() => {\n                this.chessConsole = chessConsole\n                this.elements = {\n                    playerTop: document.createElement(\"div\"),\n                    playerBottom: document.createElement(\"div\"),\n                    chessboard: document.createElement(\"div\")\n                }\n                this.elements.playerTop.setAttribute(\"class\", \"player top\")\n                this.elements.playerTop.innerHTML = \"&nbsp;\"\n                this.elements.playerBottom.setAttribute(\"class\", \"player bottom\")\n                this.elements.playerBottom.innerHTML = \"&nbsp;\"\n                this.elements.chessboard.setAttribute(\"class\", \"chessboard\")\n                this.context.appendChild(DomUtils.createElement(\"<h2 class='visually-hidden'>\" + this.i18n.t(\"chessBoard\") + \"</h2>\"))\n                this.context.appendChild(this.elements.playerTop)\n                this.context.appendChild(this.elements.chessboard)\n                this.context.appendChild(this.elements.playerBottom)\n                this.chessConsole.state.observeChess((params) => {\n                    let animated = true\n                    if (params.functionName === \"load_pgn\") {\n                        animated = false\n                    }\n                    this.setPositionOfPlyViewed(animated)\n                    this.markLastMove()\n                })\n                Observe.property(this.chessConsole.state, \"plyViewed\", (props) => {\n                    this.setPositionOfPlyViewed(props.oldValue !== undefined)\n                    this.markLastMove()\n                })\n                this.props = {\n                    position: FEN.empty,\n                    orientation: chessConsole.state.orientation,\n                    assetsUrl: undefined,\n                    markLegalMoves: true,\n                    style: {\n                        aspectRatio: 0.98\n                    },\n                    accessibility: {\n                        active: true, // turn accessibility on or off\n                        brailleNotationInAlt: true, // show the braille notation of the position in the alt attribute of the SVG image\n                        movePieceForm: true, // display a form to move a piece (from, to, move)\n                        boardAsTable: true, // display the board additionally as HTML table\n                        piecesAsList: true, // display the pieces additionally as List\n                        visuallyHidden: true // hide all those extra outputs visually but keep them accessible for screen readers and braille displays\n                    },\n                    markers: {\n                        moveInput: CONSOLE_MARKER_TYPE.moveInput,\n                        check: CONSOLE_MARKER_TYPE.check,\n                        wrongMove: CONSOLE_MARKER_TYPE.wrongMove,\n                        premove: CONSOLE_MARKER_TYPE.premove,\n                        legalMove: CONSOLE_MARKER_TYPE.legalMove,\n                        legalMoveCapture: CONSOLE_MARKER_TYPE.legalMoveCapture\n                    },\n                    extensions: [{class: PromotionDialog}, {\n                        class: ChessConsoleMarkers, props: {\n                            board: this,\n                            autoMarkers: props.markers && props.markers.moveInput ? {...props.markers.moveInput} : {...CONSOLE_MARKER_TYPE.moveInput}\n                        }\n                    }, {class: AutoBorderNone, props: { borderNoneBelow: 580 }}]\n                }\n                CoreUtils.mergeObjects(this.props, props)\n                if (this.props.accessibility.active) {\n                    this.props.extensions.push({\n                        class: Accessibility, props: this.props.accessibility\n                    })\n                }\n                this.chessboard = new Chessboard(this.elements.chessboard, this.props)\n                Observe.property(chessConsole.state, \"orientation\", () => {\n                    this.setPlayerNames()\n                    this.chessboard.setOrientation(chessConsole.state.orientation).then(() => {\n                        this.markPlayerToMove()\n                    })\n                })\n                Observe.property(chessConsole.player, \"name\", () => {\n                    this.setPlayerNames()\n                })\n                Observe.property(chessConsole.opponent, \"name\", () => {\n                    this.setPlayerNames()\n                })\n                chessConsole.messageBroker.subscribe(CONSOLE_MESSAGE_TOPICS.moveRequest, () => {\n                    this.markPlayerToMove()\n                })\n                this.chessConsole.messageBroker.subscribe(CONSOLE_MESSAGE_TOPICS.illegalMove, (message) => {\n                    this.chessboard.removeMarkers(this.props.markers.wrongMove)\n                    clearTimeout(this.removeMarkersTimeout)\n                    if (message.move.from) {\n                        this.chessboard.addMarker(this.props.markers.wrongMove, message.move.from)\n                    } else {\n                        console.warn(\"illegalMove without `message.move.from`\")\n                    }\n                    if (message.move.to) {\n                        this.chessboard.addMarker(this.props.markers.wrongMove, message.move.to)\n                    }\n                    this.removeMarkersTimeout = setTimeout(() => {\n                        this.chessboard.removeMarkers(this.props.markers.wrongMove)\n                    }, 500)\n                })\n                this.setPositionOfPlyViewed(false)\n                this.setPlayerNames()\n                this.markPlayerToMove()\n                this.markLastMove()\n\n                resolve(this)\n            })\n        })\n        /**\n         * @deprecated 2023-04-11 use `this.initialized` instead\n         */\n        this.initialization = this.initialized\n    }\n\n    setPositionOfPlyViewed(animated = true) {\n        clearTimeout(this.setPositionOfPlyViewedDebounced)\n        this.setPositionOfPlyViewedDebounced = setTimeout(() => {\n            const to = this.chessConsole.state.chess.fenOfPly(this.chessConsole.state.plyViewed)\n            this.chessboard.setPosition(to, animated)\n        })\n    }\n\n    markLastMove() {\n        window.clearTimeout(this.markLastMoveDebounce)\n        this.markLastMoveDebounce = setTimeout(() => {\n            this.chessboard.removeMarkers(this.props.markers.moveInput)\n            this.chessboard.removeMarkers(this.props.markers.check)\n            if (this.chessConsole.state.plyViewed > 0) {\n                const lastMove = this.chessConsole.state.chess.history()[this.chessConsole.state.plyViewed - 1]\n                if (lastMove) {\n                    this.chessboard.addMarker(this.props.markers.moveInput, lastMove.from)\n                    this.chessboard.addMarker(this.props.markers.moveInput, lastMove.to)\n                    if (this.chessConsole.state.chess.inCheck(lastMove) || this.chessConsole.state.chess.inCheckmate(lastMove)) {\n                        const kingSquare = this.chessConsole.state.chess.pieces(\"k\", this.chessConsole.state.chess.turn(lastMove), lastMove)[0]\n                        this.chessboard.addMarker(this.props.markers.check, kingSquare.square)\n                    }\n                }\n            }\n        })\n    }\n\n    setPlayerNames() {\n        window.clearTimeout(this.setPlayerNamesDebounce)\n        this.setPlayerNamesDebounce = setTimeout(() => {\n            if (this.chessConsole.props.playerColor === this.chessConsole.state.orientation) {\n                this.elements.playerBottom.innerHTML = this.chessConsole.player.name\n                this.elements.playerTop.innerHTML = this.chessConsole.opponent.name\n            } else {\n                this.elements.playerBottom.innerHTML = this.chessConsole.opponent.name\n                this.elements.playerTop.innerHTML = this.chessConsole.player.name\n            }\n        })\n    }\n\n    markPlayerToMove() {\n        clearTimeout(this.markPlayerToMoveDebounce)\n        this.markPlayerToMoveDebounce = setTimeout(() => {\n            this.elements.playerTop.classList.remove(\"to-move\")\n            this.elements.playerBottom.classList.remove(\"to-move\")\n            this.elements.playerTop.classList.remove(\"not-to-move\")\n            this.elements.playerBottom.classList.remove(\"not-to-move\")\n            const playerMove = this.chessConsole.playerToMove()\n            if (\n                this.chessConsole.state.orientation === COLOR.white &&\n                playerMove === this.chessConsole.playerWhite() ||\n                this.chessConsole.state.orientation === COLOR.black &&\n                playerMove === this.chessConsole.playerBlack()) {\n                this.elements.playerBottom.classList.add(\"to-move\")\n                this.elements.playerTop.classList.add(\"not-to-move\")\n            } else {\n                this.elements.playerTop.classList.add(\"to-move\")\n                this.elements.playerBottom.classList.add(\"not-to-move\")\n            }\n        }, 10)\n    }\n\n}\n\nclass ChessConsoleMarkers extends Markers {\n    drawAutoMarkers(event) {\n        clearTimeout(this.drawAutoMarkersDebounced)\n        this.drawAutoMarkersDebounced = setTimeout(() => {\n                this.removeMarkers(this.props.autoMarkers)\n                const board = this.props.board\n                const moves = this.props.board.chessConsole.state.chess.moves({square: event.square, verbose: true})\n                if (board.props.markLegalMoves) {\n                    if (event.type === INPUT_EVENT_TYPE.moveInputStarted ||\n                        event.type === INPUT_EVENT_TYPE.validateMoveInput ||\n                        event.type === INPUT_EVENT_TYPE.moveInputCanceled ||\n                        event.type === INPUT_EVENT_TYPE.moveInputFinished) {\n                        event.chessboard.removeMarkers(board.props.markers.legalMove)\n                        event.chessboard.removeMarkers(board.props.markers.legalMoveCapture)\n                    }\n                    if (event.type === INPUT_EVENT_TYPE.moveInputStarted) {\n                        for (const move of moves) { // draw dots on possible squares\n                            if (move.promotion && move.promotion !== \"q\") {\n                                continue\n                            }\n                            if (event.chessboard.getPiece(move.to)) {\n                                event.chessboard.addMarker(board.props.markers.legalMoveCapture, move.to)\n                            } else {\n                                event.chessboard.addMarker(board.props.markers.legalMove, move.to)\n                            }\n                        }\n                    }\n                }\n                if (event.type === INPUT_EVENT_TYPE.moveInputStarted) {\n                    if (event.moveInputCallbackResult) {\n                        this.addMarker(this.props.autoMarkers, event.squareFrom)\n                    }\n                } else if (event.type === INPUT_EVENT_TYPE.movingOverSquare) {\n                    this.addMarker(this.props.autoMarkers, event.squareFrom)\n                    if (event.squareTo) {\n                        this.addMarker(this.props.autoMarkers, event.squareTo)\n                    }\n                }\n            }\n        )\n    }\n}\n"],
  "mappings": "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",
  "names": ["props"]
}
