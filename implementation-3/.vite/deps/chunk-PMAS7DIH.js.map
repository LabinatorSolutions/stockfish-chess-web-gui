{
  "version": 3,
  "sources": ["../../node_modules/cm-web-modules/src/app/Component.js"],
  "sourcesContent": ["/**\n * Author and copyright: Stefan Haack (https://shaack.com)\n * Repository: https://github.com/shaack/cm-web-modules\n * License: MIT, see file 'LICENSE'\n */\nimport {DomUtils} from \"../utils/DomUtils.js\"\n\nexport class Component {\n\n    constructor(props = {}, state = {}) {\n        this.props = props\n        this.state = state\n    }\n\n}\n\nexport class UiComponent extends Component {\n\n    constructor(context, props = {}, state = {}) {\n        super(props, state)\n        this.context = context\n        this.actions = {}\n    }\n\n    /**\n     * Searches for \"data-event-listener\" attributes in the HTML, and couples them with actions.\n     * Tag Attributes:\n     *  - `data-event-listener`: The event \"click\", \"change\",...\n     *  - `data-action`: The action in this.actions, called on the event\n     *  - `data-delegate`: Query selector, to delegate the event from a child element\n     */\n    addDataEventListeners(context = this.context) {\n        const eventListenerElements = context.querySelectorAll(\"[data-event-listener]\")\n        if(this.props.debug) {\n            console.log(\"eventListenerElements\", context, eventListenerElements)\n        }\n        for (const eventListenerElement of eventListenerElements) {\n            const eventName = eventListenerElement.dataset.eventListener\n            const action = eventListenerElement.dataset.action\n            const delegate = eventListenerElement.dataset.delegate\n            if (!this.actions[action]) {\n                console.error(context, \"You have to add the action \\\"\" + action + \"\\\" to your component.\")\n            }\n            if (delegate) {\n                DomUtils.delegate(eventListenerElement, eventName, delegate, (target) => {\n                    if(this.props.debug) {\n                        console.log(\"delegate\", action, target)\n                    }\n                    this.actions[action](target)\n                })\n            } else {\n                if(this.props.debug) {\n                    console.log(\"addEventListener\", eventName, action)\n                }\n                if(!this.actions[action]) {\n                    console.error(\"no action\", \"\\\"\" + action + \"\\\"\", \"is defined\")\n                } else {\n                    eventListenerElement.addEventListener(eventName, this.actions[action].bind(this))\n                }\n            }\n        }\n        return this\n    }\n\n}\n"],
  "mappings": ";;;;;AAOO,IAAM,YAAN,MAAgB;AAAA,EAEnB,YAAY,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG;AAChC,SAAK,QAAQ;AACb,SAAK,QAAQ;AAAA,EACjB;AAEJ;AAEO,IAAM,cAAN,cAA0B,UAAU;AAAA,EAEvC,YAAY,SAAS,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG;AACzC,UAAM,OAAO,KAAK;AAClB,SAAK,UAAU;AACf,SAAK,UAAU,CAAC;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,sBAAsB,UAAU,KAAK,SAAS;AAC1C,UAAM,wBAAwB,QAAQ,iBAAiB,uBAAuB;AAC9E,QAAG,KAAK,MAAM,OAAO;AACjB,cAAQ,IAAI,yBAAyB,SAAS,qBAAqB;AAAA,IACvE;AACA,eAAW,wBAAwB,uBAAuB;AACtD,YAAM,YAAY,qBAAqB,QAAQ;AAC/C,YAAM,SAAS,qBAAqB,QAAQ;AAC5C,YAAM,WAAW,qBAAqB,QAAQ;AAC9C,UAAI,CAAC,KAAK,QAAQ,MAAM,GAAG;AACvB,gBAAQ,MAAM,SAAS,iCAAkC,SAAS,sBAAuB;AAAA,MAC7F;AACA,UAAI,UAAU;AACV,iBAAS,SAAS,sBAAsB,WAAW,UAAU,CAAC,WAAW;AACrE,cAAG,KAAK,MAAM,OAAO;AACjB,oBAAQ,IAAI,YAAY,QAAQ,MAAM;AAAA,UAC1C;AACA,eAAK,QAAQ,MAAM,EAAE,MAAM;AAAA,QAC/B,CAAC;AAAA,MACL,OAAO;AACH,YAAG,KAAK,MAAM,OAAO;AACjB,kBAAQ,IAAI,oBAAoB,WAAW,MAAM;AAAA,QACrD;AACA,YAAG,CAAC,KAAK,QAAQ,MAAM,GAAG;AACtB,kBAAQ,MAAM,aAAa,MAAO,SAAS,KAAM,YAAY;AAAA,QACjE,OAAO;AACH,+BAAqB,iBAAiB,WAAW,KAAK,QAAQ,MAAM,EAAE,KAAK,IAAI,CAAC;AAAA,QACpF;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAEJ;",
  "names": []
}
